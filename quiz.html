<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Quiz</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet"/>
  <style>
    body {
      font-family: 'Poppins', sans-serif;
      background: #f9f9f9;
      color: #000a60;
      margin: 0;
      padding: 2rem;
    }
    .container {
      max-width: 800px;
      margin: auto;
      background: white;
      padding: 2rem;
      border-radius: 16px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }
    h1 {
      font-weight: 700;
      margin-bottom: 1rem;
    }
    label {
      display: block;
      margin: 1rem 0 0.5rem;
      font-weight: 600;
    }
    textarea, input {
      width: 100%;
      padding: 1rem;
      border: 1px solid #ccc;
      border-radius: 8px;
      margin-bottom: 1rem;
      font-family: 'Poppins', sans-serif;
    }
    button {
      background: #000a60;
      color: white;
      border: none;
      padding: 0.75rem 2rem;
      border-radius: 8px;
      cursor: pointer;
      font-weight: 600;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1 id="quizTitle">Quiz</h1>
    <form id="quizForm"></form>
    <button onclick="submitQuiz()">Submit</button>
  </div>

  <script>
    const quizData = {
      "day1-quiz": [
        "Why is it important to eat often throughout the day?",
        "Why is breakfast important?",
        "How do you setup your plate for weight loss?",
        "What do you need to work on the most so far as nutrition?"
      ],
      "week1-quiz": [
        "What is one key benefit of regular exercise?",
        "How does nutrition help your fitness?",
        "Name one way to track progress effectively.",
        "What is your biggest challenge this week?"
      ],
      "week2-quiz": [
        "What is aerobic exercise?",
        "Name a carbohydrate-rich food you enjoy.",
        "How do carbs affect your energy levels?",
        "What’s one habit you can improve this week?"
      ],
      "week3-quiz": [
        "What is metabolism?",
        "How does protein help with muscle growth?",
        "Name a high-protein food you like.",
        "What would you change about your current diet?"
      ],
      "week4-quiz": [
        "What are healthy fats?",
        "How often should you train your core?",
        "What’s one new principle of training you learned?",
        "Describe your current weekly workout routine."
      ],
      "week5-quiz": [
        "Why is water important during workouts?",
        "What’s a myth about ab workouts?",
        "Describe a diet you’ve tried before.",
        "What would an ideal meal look like for you?"
      ],
      "week6-quiz": [
        "What causes a fitness plateau?",
        "What’s the difference between fiber types?",
        "How can whole grains support your health?",
        "What’s your next step if you hit a plateau?"
      ],
      "week7-quiz": [
        "What micronutrient do you need more of?",
        "Describe your sleep routine.",
        "How does stress affect your fitness?",
        "What’s one recovery tip that helps you?"
      ],
      "week8-quiz": [
        "Summarize what you’ve learned so far.",
        "What was your favorite lesson?",
        "Which workout made the most impact?",
        "How will you maintain your progress?"
      ]
    };

    const email = localStorage.getItem('userEmail');
    if (!email) window.location.href = 'index.html';

    const params = new URLSearchParams(window.location.search);
    let lesson = params.get("lesson") || "";
    const key = lesson.toLowerCase().replace(/\s+/g, "-"); // Normalize for safety

    const questions = quizData[key];
    const title = document.getElementById("quizTitle");
    const form = document.getElementById("quizForm");

    title.textContent = `${lesson.replace(/-/g, " ")}`;

    if (!questions || questions.length === 0) {
      form.innerHTML = "<p><strong>Quiz not found or has no questions.</strong></p>";
    } else {
      questions.forEach((question, i) => {
        const label = document.createElement("label");
        label.textContent = question;
        form.appendChild(label);

        const textarea = document.createElement("textarea");
        textarea.name = `q${i}`;
        textarea.required = true;
        form.appendChild(textarea);
      });
    }

    function submitQuiz() {
      const answers = {};
      new FormData(form).forEach((value, key) => {
        answers[key] = value;
      });

      console.log("Submitted answers:", answers);
      alert("Quiz submitted!");
      window.location.href = "dashboard.html";
    }
  </script>
</body>
</html>
